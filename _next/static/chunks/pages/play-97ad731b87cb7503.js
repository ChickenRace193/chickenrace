(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{2619:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play",function(){return t(8843)}])},8843:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return j}});var a=t(5893),s=t(271),r=t(3592);t(4477),t(5675);var i=t(5152),n=t.n(i),c=t(9471),o=t(5874),d=t(7294),g=t(8130),m=t(7465),x=t(6154),u=t(7814),h=t(9417);t(5518);var f=t(1358),p=t.n(f),v=t(2962);let b=n()(()=>t.e(4).then(t.bind(t,2004)),{loadableGenerated:{webpack:()=>[2004]},ssr:!1});function j(){var e,l,t,i,n,f,j,w,N,y,S,k,_,R,T,W,P;let[C,E]=(0,d.useState)(null),[G,Z,B]=(0,d.useContext)(m._),[O,A]=(0,d.useState)(!1),[L,z]=(0,d.useState)(0),[H,D]=(0,d.useState)(!1),[I,X]=(0,d.useState)(!1),[q,K]=(0,d.useState)(!0),[U,M]=(0,d.useState)("newest_first"),[V,Y]=(0,d.useState)(1),[F,J]=(0,d.useState)(10),[Q,$]=(0,d.useState)(1),[ee,el]=(0,d.useState)(1),[et,ea]=(0,d.useState)([]);(0,d.useRef)(null),(0,d.useEffect)(()=>{null!==G.socket&&(G.socket.emit("requestGameState"),G.socket.on("betsUpdated",e=>{Z({...B.current,game:{...B.current.game,bets:e}})}),G.socket.on("gameOver",e=>{console.log("Game over",e),et.length>10&&et.pop(),ea([e,...et]),Z({...B.current,game:{...B.current.game,bets:[],gameState:"Pending"}})}),G.socket.on("gameState",e=>{var l,t,a,s;(null==e?void 0:e.timeTillRaceStarts)!==(null===(l=B.current.game)||void 0===l?void 0:l.timeTillRaceStarts)&&(null==e?void 0:e.gameState)===(null===(t=B.current.game)||void 0===t?void 0:t.gameState)?Z({...B.current,game:{...B.current.game,timeTillRaceStarts:e.timeTillRaceStarts,gameState:e.gameState}}):(null===(a=B.current)||void 0===a?void 0:null===(s=a.game)||void 0===s?void 0:s.race_id)!==void 0&&B.current.game.timeTillRaceStarts!==e.timeTillRaceStarts?Z({...B.current,game:{...B.current.game,timeTillRaceStarts:e.timeTillRaceStarts,gameState:e.gameState}}):Z({...B.current,game:e})}))},[G.socket]);let es=e=>{var l;console.log("Placing bet on lane: ",O);let t=localStorage.getItem("token");if(null===t){alert("Please sign in to place a bet");return}console.log(C);let a={token:t,lane:O.lane,race_id:null===(l=G.game)||void 0===l?void 0:l.race_id,amount:L};console.log(a),x.Z.post("https://backend.hamsters.gg/api/v1/bets",a).then(e=>{A(!1)}).catch(e=>{console.log(e.response.data.message),D(e.response.data.message)})};(0,d.useEffect)(()=>{window.innerWidth<1024?K(!0):K(!1)},[]),(0,d.useEffect)(()=>{x.Z.get("https://backend.hamsters.gg/api/v1/races/"+V+"/"+F+"/"+U).then(e=>{console.log(e.data),ea(e.data.races),$(e.data.totalPages),el(e.data.currentPage)})},[]);let er=e=>{console.log("page",e.selected),e=e.selected+1,x.Z.get("https://backend.hamsters.gg/api/v1/races/"+e+"/"+F+"/"+U).then(e=>{console.log(e.data),ea(e.data.races),$(e.data.totalPages),el(e.data.currentPage)})};return(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between bg-game-gray-dark",children:[(0,a.jsx)(v.PB,{title:"Hamsters.gg - The worlds first live streamed hamster racing!",description:"Hamsters is a betting platform where you can bet on live streamed hamsters. The hamsters are real and the bets are real. The hamsters are running on a track and the first hamster to cross the finish line wins.",canonical:"https://hamsters.gg/",openGraph:{type:"website",images:["https://hamsters.gg/images/homepage/og-image.png"],url:"https://hamsters.gg/",site_name:"Hamsters.gg"}}),(0,a.jsx)(r.Z,{}),(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full bg-game-gray-light mt-[100px] transition-all h-[calc(100%-100px)] z-10 grid \n      ".concat(q?"grid-cols-1":"grid-cols-1 lg:grid-cols-[1fr_400px]","\n      "),children:[(0,a.jsxs)("div",{className:"flex relative w-full flex-col",children:[(0,a.jsx)("div",{className:"h-8 justify-center py-[2px] flex-col border-b flex border-game-gray-superlight bg-game-gray-dark w-full"}),(0,a.jsxs)("div",{className:"h-[100%] overflow-y-auto w-full  relative p-4 flex-grow flex  flex-col lg:grid grid-cols-none grid-rows-[50px_500px] lg:grid-rows-[1fr_300px] lg:grid-cols-[200px_1fr]",children:[(0,a.jsxs)("div",{className:"lg:relative absolute lg:mt-0 mt-2 left-0 top-0 h-auto lg:h-full flex-col flex w-full",children:[(0,a.jsx)("div",{className:"lg:invisible visible absolute px-2 w-[calc(100%)] overflow-x-hidden scroll-auto flex lg:flex-col flex-row gap-2 lg:pb-2",children:et.map((e,l)=>{let t;if(1===Number(e.Winner)&&(t="blue"),2===Number(e.Winner)&&(t="red"),3===Number(e.Winner)&&(t="green"),4===Number(e.Winner)&&(t="yellow"),!(l>10))return(0,a.jsx)(c.Z,{race:e,setGameReplayWindow:X,color:t,name:e.WinnerName},l)})}),(0,a.jsx)("div",{className:"invisible lg:visible lg:relative absolute px-2 w-[calc(100%)] overflow-x-hidden scroll-auto flex lg:flex-col flex-row gap-2 lg:pb-2",children:et.map((e,l)=>{let t;return 1===Number(e.Winner)&&(t="blue"),2===Number(e.Winner)&&(t="red"),3===Number(e.Winner)&&(t="green"),4===Number(e.Winner)&&(t="yellow"),(0,a.jsx)(c.Z,{race:e,setGameReplayWindow:X,color:t,name:e.WinnerName},l)})}),(0,a.jsx)("div",{className:"flex items-end w-full flex-grow lg:visible hiden",children:(0,a.jsx)(p(),{className:"items-center justify-center gap-1 text-center w-full lg:flex hidden",pageClassName:"text-sm bg-game-gray-dark w-1/6 rounded-sm",breakLabel:"...",nextLabel:">",onPageChange:e=>er(e),pageRangeDisplayed:2,pageCount:Q,previousLabel:"<",renderOnZeroPageCount:null})})]}),(0,a.jsx)("div",{className:"bg-black w-full lg:mt-0 mt-7 h-[calc(100%-100px)] border-8 border-game-gray-dark rounded-md lg:h-full",children:(0,a.jsx)(b,{url:"https://twitch.tv/hamstersgg",height:"100%",width:"100%",style:{width:"100%",height:"100%"}})}),!1!==I&&(0,a.jsx)("div",{className:"absolute flex items-center justify-center h-[calc(100%)] backdrop-blur-md top-0 w-full left-0 px-4",children:(0,a.jsxs)("div",{className:"flex w-full lg:w-1/2 items-center  flex-col gap-2 relative p-4 h-[500px] lg:h-[500px] shadow-xl border border-game-gray-superlight bg-game-gray-dark",children:[(0,a.jsx)("span",{onClick:()=>{X(!1)},className:"absolute top-4 right-4 bg-game-gray-almostwhite hover:opacity-75 cursor-pointer w-7 h-7 rounded-md flex items-center justify-center",children:"X"}),(0,a.jsx)("span",{className:"font-extrabold italic text-2xl gap-2 flex items-center justify-center text-white ",children:"GAME REPLAY"}),(0,a.jsxs)("div",{className:"flex flex-col text-white w-full",children:[(0,a.jsx)("span",{children:"Game Seed"}),(0,a.jsx)("span",{children:(0,a.jsx)("input",{type:"text",className:"bg-game-gray-superlight w-full rounded-md p-2 text-white border-game-gray-superlight",value:I.GameSeed})})]}),(0,a.jsxs)("div",{className:"flex flex-col text-white w-full",children:[(0,a.jsx)("span",{children:"Game Secret"}),(0,a.jsx)("span",{children:(0,a.jsx)("input",{type:"text",className:"bg-game-gray-superlight w-full rounded-md p-2 text-white border-game-gray-superlight",value:I.GamePrivateKey})})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,a.jsx)("span",{children:"Winner"}),(0,a.jsx)("span",{children:I.WinnerName})]}),(0,a.jsx)("div",{className:"w-full items-center flex flex-col h-full px-4",children:(0,a.jsx)("div",{className:"bg-game-gray-dark gap-1 flex flex-col  h-full w-full p-2 rounded-md border border-game-gray-superlight",children:(0,a.jsx)("div",{className:"w-full rounded-full gap-2 relative items-start justify-center lg:items-center flex h-full",children:(0,a.jsx)("video",{controls:!0,className:"flex absolute h-[200px]",src:"https://videos.hamsters.gg/"+I.RecordingURL})})})})]})}),!1!==O&&(0,a.jsx)("div",{className:"absolute w-full h-full flex items-center justify-center left-0 top-0 backdrop-blur-sm z-[999999]",children:(0,a.jsxs)("div",{className:"h-auto p-4 relative items-center flex-col flex w-[500px] border-4 border-game-gray-superlight rounded-lg bg-game-gray-dark",children:[!1!==H&&(0,a.jsxs)("div",{className:"top-0 absolute z-[9999999999] w-full h-full flex flex-col items-center justify-center text-game-white font-extrabold bg-game-gray-dark",children:[(0,a.jsxs)("div",{className:"flex flex-col text-3xl text-center  items-center justify-center gap-2 text-white",children:[(0,a.jsx)(u.G,{icon:h.eHv,className:"text-9xl text-game-lane-red"}),H]}),(0,a.jsx)("div",{className:"flex flex-col mt-4",children:(0,a.jsx)("div",{onClick:()=>{D(!1)},className:"rounded-md w-full bg-game-orange font-extrabold   hover:opacity-75 cursor-pointer px-10 border text-center h-10 justify-center items-center flex border-game-gray-superlight",children:"OK"})})]}),(0,a.jsx)("span",{className:"font-extrabold italic text-white text-5xl",children:"NEW BET"}),(0,a.jsxs)("div",{className:"flex items-center justify-center flex-col gap-2 w-full",children:[(0,a.jsxs)("span",{className:"font-extrabold italic text-2xl gap-2 flex items-center justify-center",children:[null==O?void 0:O.name," ",(0,a.jsx)("img",{src:"images/hamster-"+(null==O?void 0:O.color)+".svg",className:"h-6"})]}),(0,a.jsx)("div",{className:"w-full items-center flex flex-col h-auto px-4",children:(0,a.jsx)("div",{className:"bg-game-gray-dark gap-1 flex flex-col h-auto overflow-y-auto w-full p-2 rounded-md border border-game-gray-superlight",children:(0,a.jsxs)("div",{className:"w-full rounded-full grid grid-cols-[1fr_50px] gap-2",children:[(0,a.jsx)("input",{value:L,onChange:e=>{z(e.target.value)},min:1,className:"flex font-extrabold text-2xl border-r border-game-gray-superlight overflow-hidden items-center justify-center gap-1 bg-game-gray-dark outline-none",type:"number"}),(0,a.jsx)("img",{className:"h-[40px]",src:"images/busd-logo.svg"})]})})}),(0,a.jsx)("div",{onClick:()=>{es(null==O?void 0:O.lane)},className:"rounded-md w-full bg-game-green font-extrabold   hover:opacity-75 cursor-pointer px-10 border text-center h-10 justify-center text-white items-center flex border-game-gray-superlight",children:"PLACE BET"}),(0,a.jsx)("div",{onClick:()=>{A(!1)},className:"rounded-md w-full bg-game-orange font-extrabold   hover:opacity-75 cursor-pointer px-10 border text-center h-10 justify-center items-center flex border-game-gray-superlight",children:"CANCEL"}),(0,a.jsxs)("div",{className:"flex items-center justify-center flex-col",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-2"}),(0,a.jsx)("span",{className:"font-extrabold italic text-center  text-xs text-game-lane-red",children:"The return on your bet can change based on other hamsters wagers, and it may be adjusted up to 1 minute before the race begins."})]})]})]})}),(0,a.jsxs)("div",{className:"col-start-1 mt-2 border-game-gray-superlight col-end-3 w-full items-center flex flex-col select-none h-full justify-center",children:[null!==G.game&&(null===(e=G.game)||void 0===e?void 0:e.gameState)==="Pending"&&(0,a.jsx)("div",{className:"col-start-1 col-end-8 flex items-center flex-col justify-center ",children:(0,a.jsx)("span",{className:"text-2xl lg:text-5xl text-white",children:"Waiting for new game"})}),null!==G.game&&(null===(l=G.game)||void 0===l?void 0:l.gameState)==="Paused"&&(0,a.jsx)("div",{className:"col-start-1 col-end-8 flex items-center flex-col justify-center ",children:(0,a.jsx)("span",{className:"text-2xl lg:text-5xl text-white",children:"Game is Paused"})}),null!==G.game&&(null===(t=G.game)||void 0===t?void 0:t.gameState)==="BetClosed"&&(0,a.jsxs)("div",{className:"col-start-1 col-end-8 flex items-center flex-col justify-center ",children:[(0,a.jsx)("span",{className:"text-2xl lg:text-5xl text-white",children:"RACE STARTS IN:"}),(0,a.jsx)("span",{className:"lg:text-9xl text-4xl font-extrabold italic",children:(0,a.jsx)(g.default,{date:Date.now()+1e3*Number(null===(i=G.game)||void 0===i?void 0:i.timeTillRaceStarts)})})]}),null!==G.game&&(null===(n=G.game)||void 0===n?void 0:n.gameState)==="Racing"&&(0,a.jsx)("div",{className:"col-start-1 col-end-8 flex items-center flex-col justify-center ",children:(0,a.jsx)("span",{className:"animate-pulse lg:text-9xl text-4xl font-extrabold italic text-white",children:"RACING"})}),null!==G.game&&(null===(f=G.game)||void 0===f?void 0:f.gameState)==="Betting"&&(null===(j=G.game)||void 0===j?void 0:j.timeTillRaceStarts)>60&&(0,a.jsx)("div",{className:"col-start-1 col-end-9 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex bg-game-gray-dark border border-game-gray-superlight p-2 rounded-md mt-1 gap-1",children:[(0,a.jsx)("span",{className:"text-white",children:"Place your bets, race starts in:"}),(0,a.jsx)("span",{children:(0,a.jsx)(g.default,{zeroPadTime:0,date:Date.now()+1e3*Number(null===(w=G.game)||void 0===w?void 0:w.timeTillRaceStarts)})})]})}),null!==G.game&&(null===(N=G.game)||void 0===N?void 0:N.gameState)==="Betting"&&(0,a.jsxs)("div",{className:"lg:h-auto h-full grid grid-cols-[1fr_1fr] grid-rows-2 lg:grid-rows-1 lg:grid-cols-[1fr_2px_1fr_2px_1fr_2px_1fr] w-full",children:[(0,a.jsx)(o.Z,{game:G.game,lane:1,name:null===(y=G.game)||void 0===y?void 0:null===(S=y.racers)||void 0===S?void 0:S.lane1,color:"blue",setBetWindowOpen:A}),(0,a.jsx)("div",{className:"h-full w-[1px]  py-10  lg:inline-block hidden",children:(0,a.jsx)("div",{className:"w-full h-full text-white bg-game-gray-superlight"})}),(0,a.jsx)(o.Z,{game:G.game,lane:2,name:null===(k=G.game)||void 0===k?void 0:null===(_=k.racers)||void 0===_?void 0:_.lane2,color:"red",setBetWindowOpen:A}),(0,a.jsx)("div",{className:"h-full w-[1px]  py-10 lg:inline-block hidden",children:(0,a.jsx)("div",{className:"w-full h-full text-white bg-game-gray-superlight"})}),(0,a.jsx)(o.Z,{game:G.game,lane:3,name:null===(R=G.game)||void 0===R?void 0:null===(T=R.racers)||void 0===T?void 0:T.lane3,color:"green",setBetWindowOpen:A}),(0,a.jsx)("div",{className:"h-full w-[1px]  py-10  lg:inline-block hidden",children:(0,a.jsx)("div",{className:"w-full h-full text-white bg-game-gray-superlight"})}),(0,a.jsx)(o.Z,{game:G.game,lane:4,name:null===(W=G.game)||void 0===W?void 0:null===(P=W.racers)||void 0===P?void 0:P.lane4,color:"yellow",setBetWindowOpen:A})]})]})]})]}),(0,a.jsxs)("div",{className:"absolute right-0 top-0 z-50 ".concat(q?"w-0 -right-0":"w-[300px] lg:w-[400px]","  h-full"),children:[(0,a.jsx)("div",{onClick:()=>{K(!q)},className:"border-l border-t absolute top-[1px] ".concat(q?"right-0":"-left-7","  border-b border-game-gray-superlight flex items-center justify-center rounded-tl-md rounded-bl-md w-7 h-7 "),children:!0===q?(0,a.jsx)(u.G,{icon:h.Vkm,className:"text-sm text-game-gray-superlight  hover:text-game-gray-almostwhite transition-all cursor-pointer"}):(0,a.jsx)(u.G,{icon:h.Aq,className:"text-sm text-game-gray-superlight hover:text-game-gray-almostwhite transition-all cursor-pointer"})}),!1===q&&(0,a.jsx)(s.Z,{chatHidden:q})]})]})]})}}},function(e){e.O(0,[976,225,218,363,675,727,746,75,774,888,179],function(){return e(e.s=2619)}),_N_E=e.O()}]);